<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Game Center Offline</title>
    <style>
        :root { --bg: #0f172a; --card: #1e293b; --accent: #38bdf8; --text: #f8fafc; }
        body { font-family: sans-serif; background: var(--bg); color: var(--text); margin: 0; text-align: center; touch-action: manipulation; }
        .container { padding: 20px; max-width: 400px; margin: auto; min-height: 100vh; display: flex; flex-direction: column; justify-content: center; }
        
        /* Menu */
        .menu-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 15px; }
        .card { background: var(--card); padding: 20px; border-radius: 12px; cursor: pointer; border: 2px solid transparent; }
        .card:active { border-color: var(--accent); }
        .card span { font-size: 40px; display: block; }

        /* Screens */
        .screen { display: none; }
        .active { display: block; }
        
        /* Snake */
        canvas { background: #000; border: 2px solid #334155; display: block; margin: 0 auto; max-width: 100%; }
        .controls { display: grid; grid-template-columns: repeat(3, 1fr); gap: 5px; margin-top: 15px; }
        .btn-ctrl { background: #334155; border: none; color: white; padding: 15px; border-radius: 8px; font-size: 20px; }

        /* Math */
        .math-box { background: var(--card); padding: 30px; border-radius: 15px; margin-top: 20px; }
        #q-text { font-size: 40px; margin-bottom: 20px; color: var(--accent); }
        #ans-input { width: 80%; padding: 15px; font-size: 24px; border-radius: 8px; border: none; text-align: center; }

        .btn-back { margin-top: 30px; padding: 10px; background: #ef4444; color: white; border: none; border-radius: 5px; width: 100%; }
    </style>
</head>
<body>

<div class="container">
    <div id="menu-screen" class="screen active">
        <h1>Offline Games üéÆ</h1>
        <div class="menu-grid">
            <div class="card" onclick="openSnake()"><span>üêç</span>Snake</div>
            <div class="card" onclick="openMath()"><span>‚ûï</span>Matematika</div>
        </div>
        <button class="btn-back" style="background:#0ea5e9" onclick="window.location.reload()">Cek Koneksi</button>
    </div>

    <div id="snake-screen" class="screen">
        <h3>Skor: <span id="s-score">0</span></h3>
        <canvas id="s-canvas" width="300" height="300"></canvas>
        <div class="controls">
            <div></div><button class="btn-ctrl" onclick="setDir('UP')">‚ñ≤</button><div></div>
            <button class="btn-ctrl" onclick="setDir('LEFT')">‚óÄ</button>
            <button class="btn-ctrl" onclick="setDir('DOWN')">‚ñº</button>
            <button class="btn-ctrl" onclick="setDir('RIGHT')">‚ñ∂</button>
        </div>
        <button class="btn-back" onclick="location.reload()">Kembali</button>
    </div>

    <div id="math-screen" class="screen">
        <div class="math-box">
            <div id="q-text">0 + 0</div>
            <input type="number" id="ans-input" placeholder="?">
            <p>Skor: <span id="m-score">0</span></p>
        </div>
        <button class="btn-back" onclick="location.reload()">Kembali</button>
    </div>
</div>

<script>
    // --- NAVIGASI ---
    function openSnake() {
        document.getElementById('menu-screen').classList.remove('active');
        document.getElementById('snake-screen').classList.add('active');
        initSnake();
    }

    function openMath() {
        document.getElementById('menu-screen').classList.remove('active');
        document.getElementById('math-screen').classList.add('active');
        initMath();
    }

    // --- LOGIKA SNAKE ---
    let sInterval;
    function initSnake() {
        const canvas = document.getElementById("s-canvas");
        const ctx = canvas.getContext("2d");
        const box = 20;
        let snake = [{x: 8*box, y: 8*box}];
        let food = {x: 4*box, y: 4*box};
        let d = "RIGHT";
        let score = 0;

        window.setDir = (newDir) => {
            if(newDir=="LEFT" && d!="RIGHT") d="LEFT";
            if(newDir=="UP" && d!="DOWN") d="UP";
            if(newDir=="RIGHT" && d!="LEFT") d="RIGHT";
            if(newDir=="DOWN" && d!="UP") d="DOWN";
        };

        sInterval = setInterval(() => {
            ctx.fillStyle = "black"; ctx.fillRect(0,0,300,300);
            
            for(let i=0; i<snake.length; i++) {
                ctx.fillStyle = (i==0) ? "#38bdf8" : "white";
                ctx.fillRect(snake[i].x, snake[i].y, box-2, box-2);
            }

            ctx.fillStyle = "red"; ctx.fillRect(food.x, food.y, box-2, box-2);

            let sX = snake[0].x; let sY = snake[0].y;
            if(d=="LEFT") sX -= box; if(d=="UP") sY -= box;
            if(d=="RIGHT") sX += box; if(d=="DOWN") sY += box;

            if(sX==food.x && sY==food.y) {
                score++; document.getElementById('s-score').innerText = score;
                food = {x: Math.floor(Math.random()*14+1)*box, y: Math.floor(Math.random()*14+1)*box};
            } else snake.pop();

            let head = {x: sX, y: sY};
            if(sX<0 || sX>=300 || sY<0 || sY>=300 || snake.some(t => t.x==sX && t.y==sY)) {
                clearInterval(sInterval); alert("Game Over!"); location.reload();
            }
            snake.unshift(head);
        }, 150);
    }

    // --- LOGIKA MATH ---
    let correctAns, mScore = 0;
    function initMath() {
        let n1 = Math.floor(Math.random()*20) + 1;
        let n2 = Math.floor(Math.random()*20) + 1;
        correctAns = n1 + n2;
        document.getElementById('q-text').innerText = `${n1} + ${n2}`;
        document.getElementById('ans-input').value = "";
        document.getElementById('ans-input').focus();
    }

    document.getElementById('ans-input').addEventListener('input', function() {
        if(parseInt(this.value) === correctAns) {
            mScore++;
            document.getElementById('m-score').innerText = mScore;
            initMath();
        }
    });
</script>

</body>
</html>
